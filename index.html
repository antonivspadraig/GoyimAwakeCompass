<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pro-White / Antisemite Compass</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.5;
      background: #f9f9f9;
    }
    h1 { text-align: center; color: #222; }
    .questions { margin: 0 auto; max-width: 800px; }
    .question {
      margin-bottom: 1.6em;
      padding: 1em;
      background: white;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
    }
    .question h3 { margin-top: 0; font-size: 1.1em; }
    .options {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
    }
    .options label {
      flex: 1;
      min-width: 100px;
      text-align: center;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.15s;
    }
    .options input[type="radio"] { display: none; }
    .options input[type="radio"]:checked + span {
      background: #444;
      color: white;
    }
    button {
      display: block;
      margin: 2em auto;
      padding: 14px 40px;
      font-size: 1.2em;
      background: #222;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover { background: #444; }
    #compass-container {
      text-align: center;
      display: none;
    }
    #compass-svg {
      max-width: 100%;
      height: auto;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
      margin: 1.5em auto;
    }
    #retake {
      margin-top: 1em;
      background: #555;
    }
  </style>
</head>
<body>

<h1>Pro-White vs Anti-White × Philosemite vs Antisemite</h1>

<div id="questions" class="questions">
  <!-- Questions will be generated by JS -->
</div>

<button id="submit">Calculate Position</button>

<div id="compass-container">
  <h2>Your Position</h2>
  <svg id="compass-svg" width="600" height="600" viewBox="0 0 600 600"></svg>
  <button id="retake">Retake Quiz</button>
</div>

<script>
// ────────────────────────────────────────────────────────────────
// Questions (same as before)
const questions = [
  { text: "White people have a right to preserve their majority in their own countries.", axis: "Y", polarity: "Pro" },
  { text: "Jews have disproportionate power in global affairs.", axis: "X", polarity: "Anti" },
  { text: "White privilege is a significant problem in society.", axis: "Y", polarity: "Anti" },
  { text: "Israel is a beacon of democracy in the Middle East.", axis: "X", polarity: "Pro" },
  { text: "The \"great replacement\" theory is accurate.", axis: "Y", polarity: "Pro" },
  { text: "Criticism of Jewish influence is often justified.", axis: "X", polarity: "Anti" },
  { text: "White people are the victims of systemic discrimination today.", axis: "Y", polarity: "Pro" },
  { text: "The term \"antisemitism\" is used to suppress legitimate criticism of Israel.", axis: "X", polarity: "Anti" },
  { text: "Race-based preferences in hiring are unfair to whites.", axis: "Y", polarity: "Pro" },
  { text: "Jewish people have made invaluable contributions to civilization.", axis: "X", polarity: "Pro" },
  { text: "White people should feel guilty for historical events like colonialism and slavery.", axis: "Y", polarity: "Anti" },
  { text: "Jews are more loyal to each other than to their host countries.", axis: "X", polarity: "Anti" },
  { text: "European culture is the pinnacle of human achievement.", axis: "Y", polarity: "Pro" },
  { text: "The Holocaust is often exaggerated or used to justify current policies.", axis: "X", polarity: "Anti" },
  { text: "Non-white immigration threatens the cultural identity of Western nations.", axis: "Y", polarity: "Pro" },
  { text: "Supporting Israel is a moral imperative.", axis: "X", polarity: "Pro" },
  { text: "The concept of white supremacy is a myth invented to oppress people.", axis: "Y", polarity: "Anti" },
  { text: "Jewish people are overrepresented in positions of power due to intelligence and hard work.", axis: "X", polarity: "Pro" },
  { text: "All races are equal in every way, biologically and culturally.", axis: "Y", polarity: "Anti" },
  { text: "Antisemitism is rising due to legitimate grievances against Jewish influence.", axis: "X", polarity: "Anti" },
];

const labels = ["SA", "A", "D", "SD"];
const values = [2, 1, -1, -2];

function initQuestions() {
  const container = document.getElementById("questions");
  container.innerHTML = "";

  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `
      <h3>${i+1}. ${q.text}</h3>
      <div class="options">
        ${labels.map((lbl, j) => `
          <label>
            <input type="radio" name="q${i}" value="${j}"/>
            <span>${lbl}</span>
          </label>
        `).join("")}
      </div>
    `;
    container.appendChild(div);
  });
}

function getScore() {
  let y = 0;
  let x = 0;

  questions.forEach((q, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    if (!selected) return; // skip unanswered

    const idx = parseInt(selected.value);
    let point = values[idx];
    if (q.polarity === "Anti") point = -point;

    if (q.axis === "Y") y += point;
    else x += point;
  });

  return { x, y };
}

function drawCompass(x, y) {
  const svg = document.getElementById("compass-svg");
  svg.innerHTML = "";

  const size = 600;
  const center = size / 2;
  const range = 20; // -20 to +20
  const scale = (center - 40) / range;

  // Background quadrants
  const quadSize = center - 20;

  // Red quadrant (top-left)
  svg.innerHTML += `<rect x="20" y="20" width="${quadSize}" height="${quadSize}" fill="#ffcccc"/>`;
  // Blue (top-right)
  svg.innerHTML += `<rect x="${center}" y="20" width="${quadSize}" height="${quadSize}" fill="#cce5ff"/>`;
  // Green (bottom-left)
  svg.innerHTML += `<rect x="20" y="${center}" width="${quadSize}" height="${quadSize}" fill="#ccffcc"/>`;
  // Purple (bottom-right)
  svg.innerHTML += `<rect x="${center}" y="${center}" width="${quadSize}" height="${quadSize}" fill="#e6ccff"/>`;

  // Axes
  svg.innerHTML += `<line x1="20" y1="${center}" x2="${size-20}" y2="${center}" stroke="#000" stroke-width="3"/>`;
  svg.innerHTML += `<line x1="${center}" y1="20" x2="${center}" y2="${size-20}" stroke="#000" stroke-width="3"/>`;

  // Labels
  svg.innerHTML += `<text x="${center}" y="40" font-size="28" font-weight="bold" text-anchor="middle">Pro-White</text>`;
  svg.innerHTML += `<text x="${center}" y="${size-15}" font-size="28" font-weight="bold" text-anchor="middle">Anti-White</text>`;
  svg.innerHTML += `<text x="40" y="${center+10}" font-size="24" text-anchor="end">Antisemite</text>`;
  svg.innerHTML += `<text x="${size-40}" y="${center+10}" font-size="24" text-anchor="start">Philosemite</text>`;

  // Grid lines (optional subtle grid)
  for (let i = -range; i <= range; i += 5) {
    if (i === 0) continue;
    const px = center + i * scale;
    const py = center - i * scale;
    svg.innerHTML += `<line x1="${px}" y1="20" x2="${px}" y2="${size-20}" stroke="#ddd" stroke-width="1" stroke-dasharray="4"/>`;
    svg.innerHTML += `<line x1="20" y1="${py}" x2="${size-20}" y2="${py}" stroke="#ddd" stroke-width="1" stroke-dasharray="4"/>`;
  }

  // Red dot
  const dotX = center + x * scale;
  const dotY = center - y * scale; // invert Y (up = positive)

  svg.innerHTML += `
    <circle cx="${dotX}" cy="${dotY}" r="18" fill="red" stroke="black" stroke-width="3"/>
    <text x="${dotX}" y="${dotY+8}" fill="white" font-weight="bold" font-size="18" text-anchor="middle">YOU</text>
  `;

  // Score labels
  svg.innerHTML += `<text x="${center}" y="80" font-size="22" text-anchor="middle">Y = ${y} / 20</text>`;
  svg.innerHTML += `<text x="${center}" y="${size-50}" font-size="22" text-anchor="middle">X = ${x} / 20</text>`;
}

// ────────────────────────────────────────────────────────────────
// Event listeners
document.addEventListener("DOMContentLoaded", () => {
  initQuestions();

  document.getElementById("submit").onclick = () => {
    const { x, y } = getScore();
    document.getElementById("questions").style.display = "none";
    document.getElementById("submit").style.display = "none";
    document.getElementById("compass-container").style.display = "block";

    drawCompass(x, y);
  };

  document.getElementById("retake").onclick = () => {
    document.getElementById("compass-container").style.display = "none";
    document.getElementById("questions").style.display = "block";
    document.getElementById("submit").style.display = "block";
    // Reset radios
    document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
  };
});
</script>
</body>
</html>
